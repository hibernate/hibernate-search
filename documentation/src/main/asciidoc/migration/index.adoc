= Hibernate Search {hibernateSearchVersion}: Migration Guide from {hibernateSearchPreviousStableVersionShort}
:doctype: book
:revdate: {docdate}
:sectanchors:
:anchor:
:toc: left
:toclevels: 4
:docinfodir: {docinfodir}
:docinfo: shared,private
:title-logo-image: image:hibernate_logo_a.png[align=left,pdfwidth=33%]

[[introduction]]
== [[_introduction]] Introduction

The aim of this guide is to assist you migrating
an existing application using any version `{hibernateSearchPreviousStableVersionShort}.x` of Hibernate Search
to the latest of the `{hibernateSearchVersionShort}.x` series.

NOTE: If you think something is missing or something does not work, please link:https://hibernate.org/community[contact us].

If you're looking to migrate from an earlier version,
you should migrate step-by-step, from one minor version to the next,
following the migration guide of link:https://hibernate.org/search/documentation/[each version].

[WARNING]
====
**To Hibernate Search 5 users**

Be aware that a lot of APIs have changed since Hibernate Search 5, some only because of a package change,
others because of more fundamental changes
(like moving away from using Lucene types in Hibernate Search APIs).

When migrating from Hibernate Search 5, you are encouraged to migrate first to Hibernate Search 6.0
using the https://docs.jboss.org/hibernate/search/6.0/migration/html_single/[6.0 migration guide],
and only then to later versions (which will be significantly easier).
====

[[requirements]]
== Requirements

Hibernate Search {hibernateSearchVersion} now:

- is using JDK 11 as the baseline.
- is based on Lucene 9 for its Lucene backend.
- requires using Hibernate ORM versions from the 6.2.x family.

When migrating from previous versions of Hibernate Search
- If you were using Hibernate ORM 6.2 and your corresponding Hibernate Search dependencies included references
to artifacts ending with `-orm6` (e.g. `hibernate-search-mapper-orm-orm6`) just remove the `-orm6` suffix
(e.g. use `hibernate-search-mapper-orm` instead) when you upgrade to this version of Hibernate Search.
- If you were using previous Hibernate ORM versions (e.g. Hibernate ORM 5.6), you would need to migrate to Hibernate ORM 6.2 first
before upgrading to this version of Hibernate Search.
See https://github.com/hibernate/hibernate-orm/wiki/Migration-Guides/[Hibernate ORM migration guides].

[[data-format]]
== Data format and schema changes

Elasticsearch indexes created with Hibernate Search {hibernateSearchPreviousStableVersionShort}
can be read from and written to with Hibernate Search {hibernateSearchVersion}.

Reading and writing to Lucene indexes created with Hibernate Search {hibernateSearchPreviousStableVersionShort}
using Hibernate Search {hibernateSearchVersion} may lead to exceptions, since there were incompatible changes applied to internal fields.
You must recreate your Lucene indexes and reindex your database. The easiest way to do so is to use link:{hibernateSearchDocUrl}#indexing-massindexer[the `MassIndexer`] with link:{hibernateSearchDocUrl}#indexing-massindexer-parameters-drop-and-create-schema[`dropAndCreateSchemaOnStart(true)`].

[[configuration]]
== Configuration changes

The configuration properties are backward-compatible with Hibernate Search {hibernateSearchPreviousStableVersionShort}.

[[api]]
== API changes

The https://hibernate.org/community/compatibility-policy/#code-categorization[API]
is backward-compatible with Hibernate Search {hibernateSearchPreviousStableVersionShort}.

[[spi]]
== SPI changes

The https://hibernate.org/community/compatibility-policy/#code-categorization[SPI]
are backward-compatible with Hibernate Search {hibernateSearchPreviousStableVersionShort}.

[[behavior]]
== Behavior changes

The behavior of Hibernate Search {hibernateSearchVersion}
is backward-compatible with Hibernate Search {hibernateSearchPreviousStableVersionShort}.
